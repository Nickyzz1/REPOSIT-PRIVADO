USE AULA

select * from Evento

CREATE TABLE RESERVA
(
IDRESERVAS INT IDENTITY ,
IDSALA VARCHAR,
DATAS DATETIME,
OBSERVACAO VARCHAR
PRIMARY KEY( IDRESERVAS )
)

CREATE TRIGGER tDISPONIVEL
ON Evento
FOR INSERT
BEGIN
SELECT
DECLARE
		@DATA DATETIME,
		@SALA VARCHAR
	 SELECT @DATA = DtHrInicio, @SALA = IDSala FROM INSERTED
	 INSERT INTO RESERVAS(@SALA, @DATA, '-')
END

GO

SELECT 
E.DtHrInicio,
E.IDSala
FROM Evento as E
INNER JOIN RESERVA AS R
ON E.DtHrInicio = R.DATAS
GROUP BY E.DtHrInicio,
E.IDSala
CASE WHEN R.DATAS in Evento, 

-- SALA: 4KAWQXBGSZ26 INIT : 2022-07-24 15:07:02.000 FINISH: 2022-07-24 17:15:10.000
